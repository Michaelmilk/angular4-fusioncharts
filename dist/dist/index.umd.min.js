!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t((e.ng=e.ng||{},e.ng.fusioncharts={}),e.ng.core)}(this,function(e,t){"use strict";function a(e){return null!==e&&"object"==typeof e}function r(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n=Object.keys(e),s=0;s<n.length;++s){var o=n[s];if(a(e[o])&&a(t[o])){if(!r(e[o],t[o]))return!1}else if(e[o]!==t[o])return!1}return!0}function n(e){return void 0===e}function s(e){return JSON.parse(JSON.stringify(e))}function o(e,t){return[{provide:i,multi:!1,useValue:{core:e,modules:t}}]}var i=function(){return function(){}}();i.decorators=[{type:t.Injectable}],i.ctorParameters=function(){return[]};var p=function(){function e(e){this.fusionChartsCoreService=e,this._resolveFusionChartsCore()}return e.prototype._resolveFusionChartsCore=function(){var e=this;if(!this.resolvedFusionChartsCore){var t=this.fusionChartsCoreService.core,a=this.fusionChartsCoreService.modules;t.getCurrentRenderer&&"javascript"===t.getCurrentRenderer()?this.resolvedFusionChartsCore=t:this.resolvedFusionChartsCore=t(),a.forEach(function(t){t(e.resolvedFusionChartsCore)})}},e.prototype.getResolvedFusionChartsCore=function(){return this.resolvedFusionChartsCore},e.prototype.newFusionChartsInstance=function(e){return new this.resolvedFusionChartsCore(e)},e}();p.decorators=[{type:t.Injectable}],p.ctorParameters=function(){return[{type:i}]};var g=["type","id","width","height","dataFormat","dataSource","events","link","showDataLoadingMessage","showChartLoadingMessage","baseChartMessageFont","baseChartMessageFontSize","baseChartMessageColor","dataLoadStartMessage","dataLoadErrorMessage","dataInvalidMessage","dataEmptyMessage","typeNotSupportedMessage","loadMessage","renderErrorMessage","containerBackgroundColor","containerBackgroundOpacity","containerClassName","baseChartMessageImageHAlign","baseChartMessageImageVAlign","baseChartMessageImageAlpha","baseChartMessageImageScale","typeNotSupportedMessageImageHAalign","typeNotSupportedMessageImageVAlign","typeNotSupportedMessageImageAlpha","typeNotSupportedMessageImageScale","dataLoadErrorMessageImageHAlign","dataLoadErrorMessageImageVAlign","dataLoadErrorMessageImageAlpha","dataLoadErrorMessageImageScale","dataLoadStartMessageImageHAlign","dataLoadStartMessageImageVAlign","dataLoadStartMessageImageAlpha","dataLoadStartMessageImageScale","dataInvalidMessageImageHAlign","dataInvalidMessageImageVAlign","dataInvalidMessageImageAlpha","dataInvalidMessageImageScale","dataEmptyMessageImageHAlign","dataEmptyMessageImageVAlign","dataEmptyMessageImageAlpha","dataEmptyMessageImageScale","renderErrorMessageImageHAlign","renderErrorMessageImageVAlign","renderErrorMessageImageAlpha","renderErrorMessageImageScale","loadMessageImageHAlign","loadMessageImageVAlign","loadMessageImageAlpha","loadMessageImageScale"],u=function(){function e(e,t){this.fusionChartsService=e,this.ngZone=t}return e.prototype.ngOnInit=function(){this.oldOptions=this.getCurrentOptions()},e.prototype.ngDoCheck=function(){this.detectChanges()},e.prototype.ngAfterViewInit=function(){this.renderChart()},e.prototype.ngOnDestroy=function(){this.chartObj.dispose()},e.prototype.detectChanges=function(){var e=this.getCurrentOptions(),t=this.oldOptions,a=["width","height","type","dataFormat","dataSource","events"];this.checkAndUpdateChartDimensions(e,t),this.checkAndUpdateChartType(e,t),this.checkAndUpdateChartData(e,t),this.checkAndUpdateEvents(e,t),this.checkAndUpdateRestOptions(g.filter(function(e){return-1===a.indexOf(e)}),e,t),this.oldOptions=e},e.prototype.checkAndUpdateChartDimensions=function(e,t){var a=this,r=e.width,s=e.height,o=t.width,i=t.height;String(r)===String(o)&&String(s)===String(i)||(n(r)||n(s)?(n(r)||this.runOutsideAngular(function(){a.chartObj.resizeTo({w:r})}),n(s)||this.runOutsideAngular(function(){a.chartObj.resizeTo({h:s})})):this.runOutsideAngular(function(){a.chartObj.resizeTo(r,s)}))},e.prototype.checkAndUpdateChartType=function(e,t){var a=this,r=e.type,s=t.type;String(r).toLowerCase()!==String(s).toLowerCase()&&(n(r)||this.runOutsideAngular(function(){a.chartObj.chartType(String(r).toLowerCase())}))},e.prototype.checkAndUpdateChartData=function(e,t){var a=this,r=e.dataFormat,s=e.dataSource,o=t.dataFormat,i=t.dataSource;String(r).toLowerCase()!==String(o).toLowerCase()?n(r)||n(s)||this.runOutsideAngular(function(){a.chartObj.setChartData(s,String(r).toLowerCase()),a.chartObj.render()}):this.isSameChartData(s,i)||n(s)||this.runOutsideAngular(function(){a.chartObj.setChartData(s,r?String(r).toLowerCase():"json")})},e.prototype.isSameChartData=function(e,t){return a(e)&&a(t)?r(e,t):e===t},e.prototype.checkAndUpdateEvents=function(e,t){var a,r,s=this,o=e.events,i=t.events;this.detectChartEventsChange(o,i)&&(n(o)||(a=Object.assign({},o),r=n(i)?{}:Object.assign({},i),Object.keys(r).forEach(function(e){r[e]===a[e]?a[e]=void 0:s.runOutsideAngular(function(){s.chartObj.removeEventListener(e,r[e])})}),Object.keys(a).forEach(function(e){a[e]&&s.runOutsideAngular(function(){s.chartObj.addEventListener(e,a[e])})})))},e.prototype.detectChartEventsChange=function(e,t){return a(e)&&a(t)?!this.isSameChartEvents(e,t):!(e===t)},e.prototype.isSameChartEvents=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a=Object.keys(e),r=0;r<a.length;++r){var n=a[r];if(e[n]!==t[n])return!1}return!0},e.prototype.checkAndUpdateRestOptions=function(e,t,a){var r=this,s=!1;e.forEach(function(e){var o=t[e],i=a[e];r.isSameOptionValue(o,i)||n(o)||r.chartObj.options&&r.chartObj.options.hasOwnProperty(e)&&(r.chartObj.options[e]=o,s=!0)}),s&&this.runOutsideAngular(function(){r.chartObj.render()})},e.prototype.isSameOptionValue=function(e,t){return a(e)&&a(t)?r(e,t):String(e)===String(t)},e.prototype.renderChart=function(){var e=this,t=this.getCurrentOptions(),a=this.chartObj;t.renderAt=this.chartContainer.nativeElement,a&&a.dispose&&a.dispose(),this.chartObj=this.fusionChartsService.newFusionChartsInstance(t),this.runOutsideAngular(function(){e.chartObj.render()})},e.prototype.getCurrentOptions=function(){var e=this,t=this.chartConfig?this.chartConfig:{},r=g.reduce(function(t,a){return t[a]=e[a],t},{});if(Object.assign(r,t),a(r.dataSource)&&(r.dataSource=s(r.dataSource)),a(r.link)&&(r.link=s(r.link)),a(r.events)){var n=r.events,o={},i="__wrapper_for_angular_zone__",p=this;Object.keys(n).forEach(function(e){var t;n[e][i]?t=n[e][i]:(t=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var r=this;p.ngZone.run(function(){e.call.apply(e,[r].concat(t))})}}(n[e]),n[e][i]=t),o[e]=t}),r.events=o}return r},e.prototype.runOutsideAngular=function(e){this.ngZone.runOutsideAngular(function(){setTimeout(e)})},e}();u.decorators=[{type:t.Component,args:[{selector:"fusioncharts",template:"<div #chartContainer></div>"}]}],u.ctorParameters=function(){return[{type:p},{type:t.NgZone}]},u.propDecorators={chartContainer:[{type:t.ViewChild,args:["chartContainer"]}],chartConfig:[{type:t.Input}],type:[{type:t.Input}],id:[{type:t.Input}],width:[{type:t.Input}],height:[{type:t.Input}],dataFormat:[{type:t.Input}],dataSource:[{type:t.Input}],events:[{type:t.Input}],link:[{type:t.Input}],showDataLoadingMessage:[{type:t.Input}],showChartLoadingMessage:[{type:t.Input}],baseChartMessageFont:[{type:t.Input}],baseChartMessageFontSize:[{type:t.Input}],baseChartMessageColor:[{type:t.Input}],dataLoadStartMessage:[{type:t.Input}],dataLoadErrorMessage:[{type:t.Input}],dataInvalidMessage:[{type:t.Input}],dataEmptyMessage:[{type:t.Input}],typeNotSupportedMessage:[{type:t.Input}],loadMessage:[{type:t.Input}],renderErrorMessage:[{type:t.Input}],containerBackgroundColor:[{type:t.Input}],containerBackgroundOpacity:[{type:t.Input}],containerClassName:[{type:t.Input}],baseChartMessageImageHAlign:[{type:t.Input}],baseChartMessageImageVAlign:[{type:t.Input}],baseChartMessageImageAlpha:[{type:t.Input}],baseChartMessageImageScale:[{type:t.Input}],typeNotSupportedMessageImageHAlign:[{type:t.Input}],typeNotSupportedMessageImageVAlign:[{type:t.Input}],typeNotSupportedMessageImageAlpha:[{type:t.Input}],typeNotSupportedMessageImageScale:[{type:t.Input}],dataLoadErrorMessageImageHAlign:[{type:t.Input}],dataLoadErrorMessageImageVAlign:[{type:t.Input}],dataLoadErrorMessageImageAlpha:[{type:t.Input}],dataLoadErrorMessageImageScale:[{type:t.Input}],dataLoadStartMessageImageHAlign:[{type:t.Input}],dataLoadStartMessageImageVAlign:[{type:t.Input}],dataLoadStartMessageImageAlpha:[{type:t.Input}],dataLoadStartMessageImageScale:[{type:t.Input}],dataInvalidMessageImageHAlign:[{type:t.Input}],dataInvalidMessageImageVAlign:[{type:t.Input}],dataInvalidMessageImageAlpha:[{type:t.Input}],dataInvalidMessageImageScale:[{type:t.Input}],dataEmptyMessageImageHAlign:[{type:t.Input}],dataEmptyMessageImageVAlign:[{type:t.Input}],dataEmptyMessageImageAlpha:[{type:t.Input}],dataEmptyMessageImageScale:[{type:t.Input}],renderErrorMessageImageHAlign:[{type:t.Input}],renderErrorMessageImageVAlign:[{type:t.Input}],renderErrorMessageImageAlpha:[{type:t.Input}],renderErrorMessageImageScale:[{type:t.Input}],loadMessageImageHAlign:[{type:t.Input}],loadMessageImageVAlign:[{type:t.Input}],loadMessageImageAlpha:[{type:t.Input}],loadMessageImageScale:[{type:t.Input}]};var d=function(){function e(){}return e.forRoot=function(t){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];return{ngModule:e,providers:[p,o(t,a)]}},e}();d.decorators=[{type:t.NgModule,args:[{declarations:[u],exports:[u]}]}],d.ctorParameters=function(){return[]},e.FusionChartsModule=d,e.FusionChartsComponent=u,e.FusionChartsService=p,e.FusionChartsCoreService=i,Object.defineProperty(e,"__esModule",{value:!0})});